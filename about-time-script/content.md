## Time script
## - Strong Static Typing with Vim script -

ã€€

### https://bit.ly/2PxJOYe
### aiya000 (@public_ai000ya)

<aside class="notes">
LTã‚’å§‹ã‚ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚  
ã€ŒTime script - Strong Static Typing with Vim script -ã€ã€‚  

ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚  
  
ï¼ˆãƒ‘ãƒãƒ‘ãƒãƒ‘ãƒï¼‰  
  
LTã§ã™ã®ã§ã€ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ã©ã‚“ã©ã‚“é€²ã‚ã¦ã£ã¡ã‚ƒã„ã¾ã™ã€‚
å¤šåˆ†è¦‹é€ƒã™ã“ã¨ãŒå¤šã„ã¨æ€ã†ã®ã§ã€ã“ã®URLã«ã‚ã‚‹ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’æ‰‹å…ƒã§ã¿ã¤ã¤ã€èã„ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
</aside>

- - - - -

# Who are you?

- - - - -

### Who are you?

<div class="profile">
    <div class="left">
        ![profile-image](profile.png)
    </div>
    <div class="right">
        <ul>
            <li>name: aiya000 (@public_ai000ya)
                <ul>
                    <li>**Haskell**</li>
                    <li>Vim script</li>
                    <li>TypeScript</li>
                    <li>Category Theory</li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<aside class="notes">
ã©ã†ã‚‚ã€ã‚ã„ã‚„ã¨ç”³ã—ã¾ã™ã€‚  
Haskellã‚’ãƒ¡ã‚¤ãƒ³ã§è§¦ã£ã¦ã„ã¦ã€ãã®ä»–TypeScriptã¨Vim scriptã‚’è§¦ã£ã¦ã„ã¾ã™ã€‚  
  
æ•°å­¦ãƒ»åœè«–ã®åˆæ­©å…¥é–€æ›¸ã‚’é ’å¸ƒã—ãŸã‚Šã‚‚ã—ã¦ã„ã¾ã™ã€‚
  
24å¹´é–“ã€ã“ã®å£°ã—ã‹å‡ºã›ãªã„ã¨æ€ã£ã¦ã¦ã€ã“ã®å£°ã§ç”Ÿæ´»ã‚’ã—ã¦ã„ãŸã®ã§ã™ãŒã€æœ€è¿‘ã€Œå¯æ„›ã„å¥³ã®å­ã®å£°ã‚’å‡ºã—ãŸã„ã€ã¨æ€ã„ã€ç·´ç¿’ã—ã¦ã„ã¾ã—ãŸã€‚
ãã®æˆæœã¨ã—ã¦ã€ä½ã„å£°ã‚’å‡ºã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚  
  
ã†ã‚“â€¦â€¦ã‚ˆã‹ã£ãŸã€‚ ã£ã¦ã¨ã“ã‚ã§æœ¬é¡Œã«ã€‚
</aside>

- - - - -

# What is Time script?

<aside class="notes">
What is Time script?
</aside>

- - - - -

### What is Time script?

- `Vim script` +=
    - **'Strong' Static Typing**
    - **Advanced features**

- Like TypeScript of JavaScript.
- Also Haskell like type systems.

<aside class="notes">
Time scriptã¨ã¯ä½•ã‹ã€ã©ã‚“ãªæ„ç¾©ã‚’æŒã¤ã®ã‹ã£ã¦ã„ã†ã®ã¯ã€ç°¡å˜ã§  

ã€ŒVim scriptã«**é™çš„å‹ä»˜ã‘ã‚’å°å…¥ã™ã‚‹**ã€  
ã€Œå¾Œæ–¹äº’æ›æ€§ã‚’ä¿å…¨ã—ãªã‘ã‚Œã°ã„ã‘ãªã„Vim scriptæœ¬ä½“ã«å¤‰ã‚ã£ã¦ã€**å¾Œæ–¹äº’æ›æ€§ã‚ˆã‚Šã‚‚å…ˆé€²æ€§ã‚’å„ªå…ˆã—ã¦ã€å…ˆé€²çš„ãªæ©Ÿèƒ½ã‚’å°å…¥ã™ã‚‹**ã€  

ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚
ä»Šå›ã¯ãã®2ã¤ã«ã¤ã„ã¦ã€ç´¹ä»‹ã—ã¾ã™ã€‚  

ã¾ãšæœ€åˆã«è¨€ã£ã¦ãŠã‹ãªã‘ã‚Œã°ã„ã‘ãªã„ã®ãŒ =>
</aside>

- - - - -

### What is Time script?

- `Vim script` +=
    - 'Strong' Static Typing
    - Advanced features

**Now this is the implementing phase!**

<aside class="notes">
Time scriptã¯ã¾ã å®Ÿè£…ä¸­ã ã¨ã„ã†ã“ã¨ã§ã™ã€‚  
  
ã¨ã„ã†ã“ã¨ã§ =>
</aside>

- - - - -

### What is Time script?

Now, making Vim plugins requires Vim script.
And (not "or")

- ruby
- lua
- python2
- python3
- ...etc

<aside class="notes">
ç¾åœ¨Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã«ã¯ã€å‹•çš„å‹ä»˜ã‘è¨€èªã«é ¼ã‚‹ã®ãŒã»ã¨ã‚“ã©ä¸»æµã§ã™ã€‚
</aside>

- - - - -

### What is Time script?

Which is **static typing languages**? :thinking_face:

<aside class="notes">
é™çš„å‹ä»˜ãè¨€èªã«é ¼ã‚‹ã“ã¨ã‚‚ã§ããªãã¯ãªã„ã®ã§ã™ãŒã€ã†ãƒ¼ã‚“ã€å¤§å¤‰ã€‚  
ã¨ã„ã†ã“ã¨ã§ =>
</aside>

- - - - -

### What is Time script?

:muscle: :muscle: :muscle:  :muscle: :muscle: :muscle:  :muscle: :muscle: :muscle:  
ï¼ï¼ï¼ It's me, **Time script** ï¼œï¼œï¼œ  
:muscle: :muscle: :muscle:  :muscle: :muscle: :muscle:  :muscle: :muscle: :muscle:  

<aside class="notes">
Time scriptãŒã€Vim scriptã®Vimã¸ã®ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ®‹ã—ã¤ã¤ã€é™çš„å‹ä»˜ãè¨€èªã®æ©æµã‚’ä¸ãˆã¾ã™ï¼  

æ¬¡ã«å‹ã¨æ§‹æ–‡ã«ã¤ã„ã¦ =>
</aside>

- - - - -

### Syntax and Types

Basic types

```vim
let x:  Int    = 42
let s1: String = 'you'
let s2: String = "me"
let y:  Float  = 1.0
let b:  Bool   = v:true
let z1: Null   = v:null
let z2: Null   = v:none
```

These types can show `:help type` on Vim.

<aside class="notes">
ã“ã‚Œã‚‰ã¯ã€Œ`:help type` ã«æ›¸ã„ã¦ã‚ã‚‹å„å‹ã€ã‚’èª¿æ•´ã—ãŸã‚‚ã®ã§ã™ã€‚
</aside>

- - - - -

### Syntax and Types

```vim
let xs: List String = ['sugar', 'sweet', 'moon']
let d:  Dict Int    = {'foo': 10, 'bar': 20}

let xs: List (List Int) = [
  [0, 1], [0], []
]
```

This design of types is based on Haskell's types.

<aside class="notes">
ã‚‚ã¡ã‚ã‚“ã€Listã‚„Dictã‚‚ã‚ã‚Šã¾ã™ã€‚

ã“ã®å‹ã®æ›¸ãæ–¹ã¯ã€Haskellã¨åŒã˜ã§ã™ã€‚
</aside>

- - - - -

### Syntax and Types

```vim
" Function (Funcref) type
let F: Int -> String          = function('string')
let G: (Int, Int) -> List Int = function('range')

" Same as `Int -> (String -> Bool)`
let h: Int -> String -> Bool = { _ ->
  { _ -> v:true }
}
```

<aside class="notes">
ã“ã‚Œã¯é–¢æ•°ã¸ã®ä»˜ã‘ã§ã™ã€‚
ã“ã“ã§å¤‰æ•°åã®ã€Œhã€ãŒå°æ–‡å­—ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã¨ã€è¡Œç¶™ç¶šã®ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ãŒæ›¸ã‹ã‚Œã¦ãªã„ã®ã¯ã€ã‚ã¨ã¸ã®ä¼ç·šã§ã™ã€‚
</aside>

- - - - -

### Syntax and Types

Advanced types

```vim
let n: Nat  = 10
let c: Char = 'x'
let a: Any  = 10
```

<aside class="notes">
ã“ã‚Œã‚‰ã¯Vim scriptã«ã¯å®šç¾©ã•ã‚Œã¦ã„ãªã„å‹ã§ã™ã€‚  
  
ã€€  
Natã¯0ä»¥ä¸Šã®æ•°å€¤ã®ã¿ã‚’è¡¨ã—ã¾ã™ã€‚  
Charã¯é•·ã•1ã®æ–‡å­—åˆ—ã€‚  
  
Anyã¯ã„ã¤ã‚‚ã®ã‚„ã¤ã§ã€å‹æƒ…å ±ã‚’å¿˜å´ã™ã‚‹ã€æœ¬å½“ã¯å…¥ã‚ŒãŸããªã„ã‚„ã¤ã§ã™ã€‚
</aside>

- - - - -

### Syntax and Types

Compile error!

```vim
let n: Nat  = -10   " invalid: negative numbers
let c: Char = 'xaa' " invalid: two or more characters

" In Time script, Dict must be
" accessed by a String index.
let x: Dict Int = {'foo': 10, 'bar': 20}
echo x[0]  " invalid: integral index
```

<aside class="notes">
ã“ã‚Œã‚‰ã«å¯¾ã—ã¦ã€ã¡ã‚ƒã‚“ã¨ã“ã‚“ãªæ„Ÿã˜ã«ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¾ã™ã€‚
</aside>

- - - - -

### Syntax and Types

Compile error!

```vim
" Any is not the 'top' type.
let a: Any = 10
let b: Int = a  " invalid
```

TypeScript :point_down:

```typescript
" No compile error
let x: any = 10
let y: number = x
```

<aside class="notes">
ã‚ã¨ã“ã“ãŒå¤§äº‹ã§ã€TypeScriptã¯å®Ÿã¯ã“ã‚“ãªæ„Ÿã˜ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é€šã™ã®ã§ã™ãŒã€
å€‹äººçš„ã«ã™ã”ãã‚ˆããªã„ã®ã§ã€Time scriptã§ã¯ãã†ã—ã¾ã›ã‚“ã€‚
</aside>

- - - - -

### Syntax and Types

Typing functions

```vim
" abort by default
function F(x: Int): String
  if a:x is 0 | throw 'rejected' | endif
  echo 'bad'
  return string(x)
endfunction
echo F(0)  " Error! 'rejected'
           " (No 'bad')
```

<aside class="notes">
é–¢æ•°ã®å‹ã§ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§abortã«ã—ã¾ã™ã€‚
abortã£ã¦ã„ã†ã®ã¯ã€ä¾‹å¤–ãŒé€å‡ºã•ã‚ŒãŸã¨ãã«ã€å¾Œç¶šã®å‡¦ç†ã‚’è¡Œã‚ãªã„ã‚„ã¤ã§ã™ã­ã€‚
</aside>

- - - - -

<!-- ### Syntax and Types -->
<!--  -->
<!-- Typing functions -->
<!--  -->
<!-- ```vim -->
<!-- " Options is embraced by -->
<!-- " [] (traditional options) or -->
<!-- " [[]] (Time script's options). -->
<!-- function x.f(): Bool [dict] [[no-abort]] -->
<!--   return v:true -->
<!-- endfunction -->
<!-- ``` -->
<!--  -->
<!-- <aside class="notes"> -->
<!-- Vim scriptã¨Time scriptã®é–¢æ•°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã“ã‚“ãªæ„Ÿã˜ã«æŒ‡å®šã—ã¾ã™ã€‚ -->
<!-- </aside> -->
<!--  -->
<!-- - - - - - -->

### Syntax and Types

```vim
" Union types
let foo: Int | Null = v:null

" N-dimension tuples
let t: Tuple Char Nat        = ['a', 97]
let u: Tuple Int String Bool = [-10, 'me', v:true]
```

<aside class="notes">
ã‚ã¨ã¯å’Œå‹ã¨ã€Næ¬¡å…ƒã®ã‚¿ãƒ—ãƒ«ã‚‚ã€ã‚‚ã¡ã‚ã‚“ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
</aside>

- - - - -

# Another advanced features

<aside class="notes">
æœ€å¾Œã«ã€ã€Œå…ˆé€²çš„æ©Ÿèƒ½ã€ã«ã¤ã„ã¦ã€‚
</aside>

<!-- - - - - - -->
<!--  -->
<!-- ### Another advanced features -->
<!--  -->
<!-- String interpolations. -->
<!--  -->
<!-- ```vim -->
<!-- let n: Nat = 10 -->
<!-- echo $'$n ${n + 1}'  " 10 11 -->
<!-- ``` -->
<!--  -->
<!-- <aside class="notes"> -->
<!-- çš†å¤§å¥½ããªã‚„ã¤ã§ã™ã€‚ -->
<!--  -->
<!-- ã§ã‚‚ã“ã‚Œã¯ã‚‚ã†åƒ•ãŒVimæœ¬ä½“ã«ãƒ‘ãƒƒãƒã‚’æ›¸ã„ã¦é€ã£ãŸã®ã§ã€ -->
<!-- Time scriptå´ã§ã¯å®Ÿè£…ã—ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ -->
<!-- </aside> -->

- - - - -

### Another advanced features

Don't require **unnecessary back-slashes** on trivial cases.

```vim
let xs: List Int = [
  10  " In Time script
]
```

```vim
let xs: List Int = [
\   10
\ ]  " In Vim script

```

<aside class="notes">
ã“ã‚Œã€é–¢æ•°å‹ã®ã¨ã“ã‚ã§ä¼ç·šã£ã¦ã„ã£ã¦ãŸã‚„ã¤ã§ã™ã€‚  
Vim scriptã£ã¦è‡ªæ˜ãªç®‡æ‰€ã§ã‚‚ã€è¡Œç¶™ç¶šã®ãŸã‚ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã®ã§ã™ãŒã€
Time scriptã¯ã“ã‚Œã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ã€‚  
å€‹äººçš„ã«ã¯ã™ã£ã£ã£ã£ã£ã”ãæ¨ã—ãƒã‚¤ãƒ³ãƒˆã§ã™ï¼
</aside>

- - - - -

### Another advanced features

Don't require **unnecessary quotes 'on `{}` notation'** dicts.

```vim
echo {foo: 10}  " {'foo': 10}
```

Also allowing **mixin names** both quoted and not quoted.

```vim
let x = { aaa: 'caramel', 'keba-b': 'sweet' }
```

<aside class="notes">
ã“ã‚Œã¯æœ€è¿‘Vim scriptã«ã‚‚ ã‚·ãƒ£ãƒ¼ãƒ—ãƒ–ãƒ­ãƒƒã‚¯ãƒ–ãƒ­ãƒƒã‚¯ã£ã¦ã„ã†è¨˜æ³•ã§ã€ã‚­ãƒ¼ã®åå‰ã«ã‚¯ã‚ªãƒ¼ãƒˆã‚’å¿…è¦ã—ãªããªã£ãŸã®ã§ã™ãŒã€
å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã«ã‚·ãƒ£ãƒ¼ãƒ—ã‚’å…ˆé ­ã«ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã£ãŸã‚Šã€ã‚¯ã‚ªãƒ¼ãƒˆã‚’ã¤ã‘ã‚‹ã‚±ãƒ¼ã‚¹ã¨æ··åœ¨ã•ã›ã‚‰ã‚Œãªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚  
  
Time scriptã¯ã“ã‚Œã‚‰ã®æ··ä¹±ã‚’çµ±åˆã—ã¦ã€ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
</aside>

- - - - -

### Another advanced features

Allowing to **names of non upper cases** `[a-z_]+` for function references.

In Time script :point_down:

```vim
let to_string = function('string')  " OK
let ToString = function('string')   " OK
```

In Vim script :point_down:

```vim
let to_string = function('string')  " runtime error!!
let ToString = function('string')   " OK
```

<aside class="notes">
ã•ã„ã”ï¼
ã“ã‚Œã‚‚å…ˆç¨‹ã€ä¼ç·šã¨ã—ã¦æ›¸ã„ã¦ãŠã„ãŸã®ã§ã™ãŒâ€¦â€¦  
  
Vim scriptã§ã¯é–¢æ•°å‚ç…§ã¸ã®å¤‰æ•°ã¯å¤§æ–‡å­—ã‚¹ã‚¿ãƒ¼ãƒˆã§åä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã£ã¦ã€ã“ã‚Œã¯å€‹äººçš„ãªå®Ÿè¡Œæ™‚ä¾‹å¤–ã®æ¸©åºŠã«ãªã£ã¦ã„ã¾ã™ã€‚  
ã¨ã„ã†ã“ã¨ã§è³›å¦ä¸¡è«–ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ãã®åˆ¶é™ã‚’ã¨ã£ã±ã‚‰ã£ã¡ã‚ƒã„ã¾ã™ã€‚  
  
ã¨ã„ã†ã¨ã“ã‚ã§â€¦â€¦
</aside>

- - - - -

:point_right: Thanks! :point_right:

<aside class="notes">
ä»¥ä¸Šã§ã™ï¼

**ãã®ä»–è‰²ã‚“ãªã€è¶…å¼·åŠ›ãªæ©Ÿèƒ½ã‚’æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã®ã§ã€GitHubãƒªãƒã‚¸ãƒˆãƒªã®READMEã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚**
</aside>

- - - - -

Please give me stars to increase my development!  
ğŸ¤ŸğŸ™„ğŸ¤Ÿ

[https://github.com/aiya000/hs-time-script](https://github.com/aiya000/hs-time-script)

:point_up: :point_up: :point_up:

<aside class="notes">
ã‚ˆã‘ã‚Œã°Starãã ã•ã„ã€‚
ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
</aside>
