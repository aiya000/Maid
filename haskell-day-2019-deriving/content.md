ã€€
## ã€Œã—ã‚“ã•ã‚“ãã¼ã†ã€
## GHCã®derivingãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼
ã€€
### ğŸ¤ŸğŸ™„ğŸ¤Ÿ aiya000
### https://bit.ly/2MuMofR

- - - - -

## åƒ•

<div class="profile">
    <div class="left">
        ![profile-image](profile.png)
    </div>
    <div class="right">
        <ul>
            <li>åå‰: aiya000 (ã‚ã„ã‚„)</li>
            <li>åœè«–ã‚’ã¡ã‚‡ã£ã¨ã ã‘</li>
            <li>æ¨ã—ã‚¨ãƒ‡ã‚£ã‚¿: Vim</li>
        </ul>
    </div>
</div>

<aside class="notes">
åå‰ã‚’ã€Œã‚ã„ã‚„ãœã‚ãœã‚ãœã‚ã€ã¨ç”³ã—ã¾ã™ã€‚
æ™®æ®µã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã‹ã€ã‚ã¨ã¯å°‘ã—ã ã‘åœè«–ã‚’ã‚„ã£ã¦ã„ã¦ã€æ•°å­¦åœè«–å…¥é–€æœ¬ã¿ãŸã„ãªã®ã‚’é ’å¸ƒã—ãŸã‚Šã—ã¦ã¾ã™ã€‚

åƒ•ã®ã¡ã‚‡ã£ã¨ã—ãŸè¿‘æ³ãªã®ã§ã™ãŒâ€¦â€¦

ã‚‚ã¨ã‚‚ã¨ã€ã„ã‚ã‚†ã‚‹åœ°å£°ãŒå‡ºã›ãªãã¦ã€æ™®æ®µã‹ã‚‰ã“ã®è£å£°ã§è©±ã—ã¦ã‚‹ã‚“ã§ã™ã‚ˆã€‚

ãã‚Œã§æœ€è¿‘ã¯VTuberã«ãªã‚ŠãŸãã¦ã€
ãƒœã‚¤ã‚¹ãƒã‚§ãƒ³ã‚¸ãƒ£ãƒ¼ã«é ¼ã‚‰ãªã„ã§ã€
å˜ãªã‚‹è£å£°ã˜ã‚ƒãªãã¦å¯æ„›ã„å¥³ã®å­ã®å£°ã‚’å‡ºã›ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ãªã€œã€œã¨æ€ã£ã¦ã€
ç·´ç¿’ã—ã¦ãŸã‚“ã§ã™ã€‚

ãã—ãŸã‚‰ã“ã‚“ãªã€åœ°å£°ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

â€¦â€¦ã§ã¯è‡ªå·±ç´¹ä»‹ã¯ã“ã“ã¾ã§ã«ã—ã¦ã€æ¬¡ã«ã„ãã¾ã—ã‚‡ã†ã€‚

ã¾ãšã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æœ€åˆã«å­¦ã¶ã“ã¨ã¯â€¦â€¦ ->
</aside>

- - - - -

ã—ã‚“ã•ã‚“-ãã¼ã†ã€ç¥ç®—é¬¼è¬€ã€‘

ã€€

äººçŸ¥ã®åŠã°ãªã„ã‚ˆã†ãªã€  
ã™ãã‚ŒãŸå·§ã¿ãªç­–ç•¥ã®ã“ã¨ã€‚

<aside class="notes">
ã“ã‚Œã§ã™ã€‚

çš†ã•ã‚“ã€Œã—ã‚“ã•ã‚“ãã¼ã†ã£ã¦ä½•ï¼Ÿã€ã£ã¦æ„Ÿã˜ã ã¨æ€ã†ã®ã§ã€æ°—ã«ãªã‚‹ã¨ã“ã‚ã‚’ã¯ã£ãã‚Šã•ã›ã¦ãŠãã¾ã—ã‚‡ã†ï¼

ç¥ç®—é¬¼è¬€ã¨ã¯
ã€ŒäººçŸ¥ã®åŠã°ãªã„ã‚ˆã†ãªã€ã™ãã‚ŒãŸå·§ã¿ãªç­–ç•¥ã®ã“ã¨ã€‚ã€
ã§ã™ã€‚

ãã‚Œã ã‘GHC Haskellã®derivingã¯ã€ã™ã”ãè³¢ããªã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚
</aside>

- - - - -

## ä»Šå›ã®å†…å®¹

- - - - -

## GHCã®æä¾›ã™ã‚‹
## derivingæ©Ÿèƒ½ã®å…¨ä½“åƒ

- - - - -

### GHCã®æä¾›ã™ã‚‹derivingãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®å…¨ä½“åƒ - ä»Šå›ã®å†…å®¹

ã€4ç¨®é¡ã€ã®å„derivingæ©Ÿæ§‹ã®ç´¹ä»‹ + Î±

- Haskellæ¨™æº–ã®deriving
- `GeneralizedNewtypeDeriving`
- `DeriveAnyClass`
- `DerivingVia`

- - - - -

## ãã‚‚ãã‚‚derivingã¨ã¯

- - - - -

## Haskellæ¨™æº–

- - - - -

### Haskellæ¨™æº– - ãã‚‚ãã‚‚derivingã¨ã¯

```haskell
data Direction = Left | Right | Up | Down
  deriving (Eq, Show, Enum, Bounded)
```

<div class="twin">
    <div class="pane vertical-center">
        <div>é–¢æ•°ã‚’è‡ªå‹•ã§</div>
        <div>å®šç¾©ã—ã¦ãã‚Œã‚‹ã‚„ã¤</div>
        <div>ã€€</div>
        <div>ç‰¹å®šã®å‹ã‚¯ãƒ©ã‚¹ã®ã¿ã«å¯¾ã—ã¦</div>
        <div>ã—ã‹ä½¿ãˆãªã„</div>
        <div>Eqãƒ»Showãƒ»Enumãƒ»...ãƒ»~~Read~~</div>
    </div>

    >>> Left == Left
    True

    >>> [Right .. Down]
    [Right,Up,Down]

    >>> maxBound  :: Direction
    Down

    >>> minBound :: Direction
    Left
</div>

- - - - -

## GHCæ‹¡å¼µã®deriving

- - - - -

:point_down: ä»Šå›ã®ä¸»é¡Œ

## GHCæ‹¡å¼µã®deriving

- - - - -

### GHCæ‹¡å¼µã®deriving - ä»Šå›ã®ä¸»é¡Œ

æ–°ã—ã„3ã¤ã®derivingæ–¹æ³•

- `GeneralizedNewtypeDeriving`
- `DeriveAnyClass`
- `DerivingVia`

- - - - -

## GeneralizedNewtypeDeriving

- - - - -

### GeneralizedNewtypeDeriving - GHCæ‹¡å¼µã®deriving

ã€Œã©ã†ã„ã†æ„å‘³ï¼Ÿã€

- Generalized
    - ã€Œä¸€èˆ¬åŒ–ã•ã‚ŒãŸã€
- NewtypeDeriving
    - ã€Œ`newtype`ç”¨ã®`deriving`ã€

- - - - -

### GeneralizedNewtypeDeriving - GHCæ‹¡å¼µã®deriving

```haskell
data Nat = Zero | Succ Nat
  deriving (Show)

class Numeric a where
  toNumber :: a -> Int

instance Numeric Nat where
  toNumber Zero     = 0
  toNumber (Succ x) = 1 + toNumber x
```

```haskell
{-# LANGUAGE GeneralizedNewtypeDeriving #-}

newtype NonNegative = NonNegative Nat
  deriving (Numeric)  -- GeneralizedNewtypeDerivingã®æ©Ÿèƒ½
```

- - - - -

### GeneralizedNewtypeDeriving - GHCæ‹¡å¼µã®deriving

Nat

```
>>> toNumber Zero
0
>>> toNumber (Succ (Succ Zero))
2
```

NonNegative

```
>>> toNumber $ NonNegative Zero
0
>>> toNumber $ NonNegative (Succ (Succ Zero))
2
```

- - - - -

## DeriveAnyClass

- - - - -

### DeriveAnyClass - GHCæ‹¡å¼µã®deriving

TODO

- - - - -

## DerivingVia

- - - - -

:point_down: åƒ•ã®ã‚ã¡ã‚ƒæ¨ã—GHCæ‹¡å¼µ

## DerivingVia

- - - - -

### DerivingVia - GHCæ‹¡å¼µã®deriving

TODO

- - - - -

# ãŠã¾ã‘

- - - - -

### derivingæ–¹æ³•ï¼ˆå…¨ç¨®é¡ï¼‰ - ãŠã¾ã‘

å‹ã‚¯ãƒ©ã‚¹ã‚’derivingã™ã‚‹æ–¹æ³•ãŒã€Œ4ç¨®é¡ã€ã‚ã‚‹

- Haskellæ¨™æº–ã®deriving
- `DeriveAnyClass`
- `GeneralizedNewtypeDeriving`
- `DerivingVia`

- - - - -

# ï¼ï¼ï¼ å¤šã„ ï¼œï¼œï¼œ

- - - - -

### GHCæ‹¡å¼µã®deriving - ãŠã¾ã‘

ã‚ã‚‹å®Ÿè£…ãƒ‡ãƒ¼ã‚¿å‹`Two`ã®å®Ÿè£…

```haskell
class Numeric a where
  toNumber :: a -> Int
  toNumber = const 10  -- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…
```

```haskell
data One = One
instance Numeric One where
  toNumber One = 1  -- ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å®Ÿè£…
```

```haskell
{-# LANGUAGE DeriveAnyClass #-}
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
newtype Two = Two { pred :: One }
  deriving (Numeric)  -- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å®Ÿè£…ã©ã£ã¡ï¼Ÿï¼Ÿ
```

- - - - -

Haskellã€Œ`deriving (Numeric)`ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å®Ÿè£…ã©ã£ã¡ï¼Ÿï¼Ÿã€

GHCã€Œã€€ã€€ã€€ã€€ã€€ã‚ã‹ã‚‰ã‚“ã€€ã€€ã€€ã€€ã€€ã€ã€€ã€€ã€€

```markdown
warning:
    â€¢ Both DeriveAnyClass and GeneralizedNewtypeDeriving are enabled
      Defaulting to the DeriveAnyClass strategy for instantiating Numeric
    â€¢ In the newtype declaration for â€˜Twoâ€™
```

<div class="unimportant">
æ„è¨³: `DeriveAnyClass`ãƒ»`GeneralizedNewtypeDeriving`  
ã©ã£ã¡ã‚‚é©ç”¨ã§ãã‚‹ã‘ã©ï¼Ÿ  
ã¨ã‚Šã‚ãˆãš `DeriveAnyClass` ã—ã¦ãŠãã­ã€‚
</div>

- - - - -

DerivingStrategiesã€Œ
ã“ã„ã¤ã‚‰ã‚¢ã‚«ãƒ³ã€‚
ãƒ¯ã‚¤ãŒã¾ã¨ã‚ãªãã‚ƒã€‚ã€

- - - - -

## DerivingStrategies - GHCã®æä¾›ã™ã‚‹derivingãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®...

DerivingStrategiesã€Œåå‰ã‚’ã¤ã‘ã¾ã—ãŸã€

- stock
    - Haskellæ¨™æº–ã®deriving
- anyclass
    - `DeriveAnyClass`
- newtype
    - `GeneralizedNewtypeDeriving`
- via
    - `DerivingVia`

- - - - -

## ãŠã¾ã‘ï¼ˆãã®ï¼’ï¼‰

- - - - -

## StandaloneDeriving

[GHC User's Guide - StandaloneDeriving](https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html?highlight=deriveanyclass#extension-StandaloneDeriving)

- - - - -

## ãŠã¾ã‘ï¼ˆãã®ï¼“ï¼‰

- - - - -

## ApplyingVia

- - - - -

### ApplyingVia - ãŠã¾ã‘ï¼ˆãã®ï¼“ï¼‰

- - - - -

# ãŠã‚ã‚Š
